<div
  class="grid grid-rows-[108px_1fr] grid-cols-[300px_1fr] h-screen max-[1420px]:grid-cols-[200px_1fr] max-[768px]:flex max-[768px]:flex-col"
>
  <app-sidebar
    [name]="student?.nome"
    [email]="student?.email"
    [navItens]="[
      {
        title: 'Página inicial',
        routerLink: ['/student']
      },
      {
        title: 'Meus dados'
      },
      {
        title: 'Meus cursos'
      }
    ]"
  ></app-sidebar>

  <app-header-navbar
    [name]="student?.nome"
    [description]="'Bem vindo(a) a sua área do aluno EXTECAMP'"
  ></app-header-navbar>

  <div
    class="col-start-2 overflow-y-auto w-full py-6 bg-gray-50 overflow-x-hidden"
  >
    <div
      [ngClass]="{
        'py-8': subscribedCourses.length > 0
      }"
      class="flex flex-col w-[1072px] mx-auto gap-y-8 max-[1420px]:w-full max-[1420px]:px-4"
    >
      <!-- Notificação 1 -->
      <section
        *ngIf="nextCourseWithTermNotification"
        class="flex p-4 gap-x-6 rounded-xl bg-orange-50 border border-orange-300 shadow-sm"
      >
        <div
          class="relative w-5 h-5 rounded-full before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:w-[28px] before:h-[28px] before:rounded-full before:border-2 before:border-orange-600/30 after:absolute after:top-1/2 after:left-1/2 after:-translate-x-1/2 after:-translate-y-1/2 after:w-[38px] after:h-[38px] after:rounded-full after:border-2 after:border-orange-600/10"
        >
          <img
            src="../../../../../assets/svgs/alert-circle.svg"
            class="w-5 h-5"
          />
        </div>
        <div class="flex flex-1 flex-col gap-y-3">
          <div class="flex flex-col gap-1">
            <div class="flex items-start justify-between">
              <h1 class="font-semibold text-sm text-orange-700">
                Atenção! Termo de compromisso disponível para assinatura
              </h1>
              <button
                type="button"
                (click)="
                  handleCloseNotification(
                    nextCourseWithTermNotification.id,
                    'termo'
                  )
                "
              >
                <img
                  src="../../../../../assets/svgs/x-close-orange.svg"
                  class="w-5 h-5"
                />
              </button>
            </div>
            <p class="flex-1 font-normal text-sm text-orange-600">
              Sua assinatura é necessária para confirmar sua inscrição no curso
              {{ nextCourseWithTermNotification.sigla }} -
              {{ nextCourseWithTermNotification.nome }}
              e garantir que você esteja ciente das responsabilidades e
              obrigações envolvidas.
              <br /><br />
              Por favor, leia atentamente o termo de compromisso antes de
              prosseguir com a assinatura. Ele contém informações importantes
              sobre prazos, materiais do curso, expectativas de participação e
              quaisquer outras diretrizes relevantes.
            </p>
          </div>
          <div class="flex gap-x-3">
            <a class="font-semibold text-sm text-orange-600">Assinar</a>
            <a class="font-semibold text-sm text-orange-700"
              >Ler termo de compromisso</a
            >
          </div>
        </div>
      </section>

      <!-- Notificação 2 -->
      <section
        *ngIf="nextCourseWithUploadNotification"
        class="flex p-4 gap-x-6 rounded-xl bg-orange-50 border border-orange-300 shadow-sm"
      >
        <div
          class="relative w-5 h-5 rounded-full before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:w-[28px] before:h-[28px] before:rounded-full before:border-2 before:border-orange-600/30 after:absolute after:top-1/2 after:left-1/2 after:-translate-x-1/2 after:-translate-y-1/2 after:w-[38px] after:h-[38px] after:rounded-full after:border-2 after:border-orange-600/10"
        >
          <img
            src="../../../../../assets/svgs/alert-circle.svg"
            class="w-5 h-5"
          />
        </div>
        <div class="flex flex-1 flex-col gap-y-3">
          <div class="flex flex-col gap-1">
            <div class="flex items-start justify-between">
              <h1 class="flex-1 font-semibold text-sm text-orange-700">
                Atenção! Realize o upload de documentos obrigatórios para
                finalização da sua inscrição.
              </h1>
              <button
                type="button"
                (click)="
                  handleCloseNotification(
                    nextCourseWithUploadNotification.id,
                    'uploads'
                  )
                "
              >
                <img
                  src="../../../../../assets/svgs/x-close-orange.svg"
                  class="w-5 h-5"
                />
              </button>
            </div>
            <p class="flex-1 font-normal text-sm text-orange-600">
              O envio dos documentos é necessário para confirmar sua inscrição
              no curso {{ nextCourseWithUploadNotification.sigla }} -
              {{ nextCourseWithUploadNotification.nome }}.
            </p>
          </div>
          <div class="flex gap-x-3">
            <a class="font-semibold text-sm text-orange-600"
              >Enviar documentos</a
            >
            <a class="font-semibold text-sm text-orange-700">Saiba mais</a>
          </div>
        </div>
      </section>

      <section class="w-full max-[768px]:w-screen">
        <div
          class="flex py-6 items-center justify-between max-[1420px]:flex-col max-[1420px]:gap-4"
        >
          <h1 class="font-semibold text-lg text-gray-900">Meus cursos</h1>
          <div class="flex gap-2">
            <button
              class="rounded-md px-3 py-2 font-semibold text-sm text-gray-700 bg-gray-50"
            >
              Todos
            </button>
            <button
              class="rounded-md px-3 py-2 font-semibold text-sm text-gray-500"
            >
              Completos
            </button>
            <button
              class="rounded-md px-3 py-2 font-semibold text-sm text-gray-500"
            >
              Incompletos
            </button>
          </div>
          <button
            *ngIf="subscribedCourses.length > 0"
            class="rounded-md px-3 py-2 font-semibold text-sm bg-violet-600 text-white"
            [routerLink]="['/student', 'courses']"
          >
            Buscar novo curso
          </button>
        </div>

        <!-- Cursos registrados -->
        <div class="w-full overflow-x-auto">
          <table
            *ngIf="subscribedCourses.length > 0"
            class="w-full rounded-2xl max-[1420px]:w-[1072px]"
          >
            <thead class="border-b border-gray-200">
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              >
                Sigla
              </th>
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              >
                Oferecimento
              </th>
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              >
                Nome do curso
              </th>
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              >
                Tipo de curso
              </th>
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              >
                Inscrição
              </th>
              <th
                class="p-3 bg-gray-100 text-left font-medium text-xs text-gray-700"
              ></th>
            </thead>
            <tbody
              *ngFor="let subscribedCourse of subscribedCourses; let i = index"
            >
              <tr>
                <td
                  class="p-3 bg-white text-left font-medium text-sm text-gray-900 border-b border-b-gray-200"
                >
                  {{ subscribedCourse.sigla }}
                </td>
                <td
                  class="p-3 bg-white text-left font-normal text-sm text-gray-700 border-b border-b-gray-200 w-[121px]"
                >
                  {{ formatIndex(i) }}
                </td>
                <td
                  class="p-3 bg-white text-left font-normal text-sm text-gray-700 border-b border-b-gray-200 w-[297px]"
                >
                  {{ subscribedCourse.nome }}
                </td>
                <td
                  class="p-3 bg-white text-left font-normal text-sm text-gray-700 border-b border-b-gray-200"
                >
                  <div
                    class="flex flex-row items-center gap-x-[6px] rounded-2xl bg-emerald-50 pl-[6px] pr-2 py-0.5 w-fit"
                  >
                    <div
                      class="w-[6px] h-[6px] rounded-full bg-emerald-500"
                    ></div>
                    <p class="font-medium text-xs text-emerald-800">
                      {{ subscribedCourse.tipo }}
                    </p>
                  </div>
                </td>
                <td
                  class="p-3 bg-white text-left font-normal text-sm text-gray-700 border-b border-b-gray-200 uppercase"
                >
                  {{ verifySubscription(subscribedCourse.aluno_inscricao) }}
                </td>
                <td
                  class="p-3 bg-white text-left font-normal text-sm text-gray-700 border-b border-b-gray-200 w-[72px]"
                >
                  <div class="relative">
                    <button
                      (click)="
                        handleSwitchDropdownOptionsState(subscribedCourse.id)
                      "
                      class="flex items-center justify-center"
                    >
                      <img
                        src="../../../../../assets/svgs/more.svg"
                        class="w-4 h-4"
                      />
                    </button>
                    <div
                      *ngIf="openedDropdownOptions === subscribedCourse.id"
                      class="absolute top-1/2 -translate-y-1/2 right-14 z-[5] bg-white border border-gray-200 rounded-xl overflow-hidden"
                    >
                      <button
                        class="w-full px-3 py-3 whitespace-nowrap font-normal text-sm text-left cursor-pointer hover:bg-violet-600 hover:text-white"
                        type="button"
                        (click)="handleEdit(subscribedCourse.id)"
                      >
                        Editar informações
                      </button>
                      <button
                        class="w-full px-3 py-3 whitespace-nowrap font-normal text-sm text-left cursor-pointer hover:bg-violet-600 hover:text-white"
                        type="button"
                        (click)="handleUnsubscribe(subscribedCourse.id)"
                      >
                        Cancelar inscrição
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Sem cursos registrados -->
        <div
          *ngIf="subscribedCourses.length === 0"
          class="rounded-2xl border border-gray-200 flex flex-col py-8 gap-6 items-center"
        >
          <div class="flex justify-center w-full">
            <div class="flex flex-col gap-1 items-center w-[352px]">
              <h1 class="font-semibold text-base text-gray-900">
                Sem cursos registrados
              </h1>
              <p class="font-normal text-sm text-gray-600 text-center">
                Você ainda não está inscrito ou matriculado em um curso da
                EXTECAMP
              </p>
            </div>
          </div>
          <button
            class="rounded-lg px-[14px] py-2 w-fit bg-violet-600 font-semibold text-sm text-white"
            [routerLink]="['/student', 'courses']"
          >
            Buscar novo curso
          </button>
        </div>
      </section>
    </div>
  </div>
</div>
